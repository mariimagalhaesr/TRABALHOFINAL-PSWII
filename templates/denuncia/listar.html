{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="page-title" data-aos="fade">
  <div class="container position-relative">
    <h1>Gerenciamento de Denúncias</h1>
    <p>Visualize e gerencie todas as denúncias recebidas.</p>
    <nav class="breadcrumbs">
      <ol>
        <li><a href="{% url 'index' %}">Página Inicial</a></li>
        <li>Denúncias</li>
      </ol>
    </nav>
  </div>
</div><section class="section">
    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="table-responsive">
            <table class="table table-dark table-striped table-hover mb-0">
                <thead>
                    <tr>
                        <th>#ID</th>
                        <th>Categoria</th>
                        <th>Data de Envio</th>
                        <th>Status</th>
                        <th>Ação</th>
                    </tr>
                </thead>
                <tbody>
                    {% for denuncia in denuncias %}
                    <tr>
                        <td>{{ denuncia.id }}</td>
                        <td>{{ denuncia.categoria.nome }}</td>
                        <td>{{ denuncia.dt_envio|date:"d/m/Y H:i" }}</td>
                        <td>
                            <span class="badge 
                                {% if denuncia.status == 'recebida' %}bg-primary
                                {% elif denuncia.status == 'em_andamento' %}bg-warning text-dark
                                {% elif denuncia.status == 'finalizada' %}bg-success
                                {% else %}bg-secondary{% endif %}">
                                {{ denuncia.get_status_display }}
                            </span>
                        </td>
                        <td>
                            <a href="{% url 'detalhar_denuncia' denuncia.id %}" class="btn btn-sm btn-info">Ver Detalhes</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center p-4">Nenhuma denúncia recebida ainda.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}